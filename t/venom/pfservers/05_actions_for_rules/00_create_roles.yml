name: Create roles
version: 2
testcases:
- name: create-dot1x-roles
  steps:
  - type: http
    method: POST
    url: '{{.pfserver_webadmin_url}}/api/v1/config/roles'
    ignore_verify_ssl: true
    body: >-
      {
        "id":"{{.dot1x_user_role.id}}",
        "max_nodes_per_pid":0,
        "notes":"{{.dot1x_user_role.notes}}"
      }
    headers:
      "Authorization": "{{.pfserver_token}}"
      "Content-Type": "application/json"
    assertions:
      - result.statuscode ShouldEqual 201

  - type: http
    method: POST
    url: '{{.pfserver_webadmin_url}}/api/v1/config/roles'
    ignore_verify_ssl: true
    body: >-
      {
        "id":"{{.dot1x_machine_role.id}}",
        "max_nodes_per_pid":0,
        "notes":"{{.dot1x_machine_role.notes}}"
      }
    headers:
      "Authorization": "{{.pfserver_token}}"
      "Content-Type": "application/json"
    assertions:
      - result.statuscode ShouldEqual 201      
    
