executor: pf_api_node_delete
input:
  node_id: {}
steps:
- type: mac_address_url_encoder
  mac_address: "{{.input.node_id}}"

# delete_node
- type: pf_api_node_action
  action: DELETE
  node_id: "{{.result.mac_address_url_encoded}}"
  assertions:
    - result.pf_api_node_action_json.message ShouldEqual "Deleted {{.input.node_id}} successfully"

# check node deleted
- type: pf_api_node_check
  node_id: "{{.result.mac_address_url_encoded}}"
  status_code: 404
  assertions:
    - result.pf_api_node_check_json.message ShouldEqual "Unable to get resource with this identifier"
