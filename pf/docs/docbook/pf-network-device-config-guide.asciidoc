PacketFence Network Devices Configuration Guide
===============================================
:encoding: UTF-8
:lang: en
:doctype: book

////

    PacketFence Network Devices Configuration Guide

    This file is part of the PacketFence project.

    See pf-network-device-config-guide-docinfo.xml for authors, copyright and
    license information.

////

About this Guide
----------------

This guide covers the configuration of network devices in order to integrate them with
PacketFence in VLAN enforcement. Switches, wireless controllers and wireless access points 
are all considered network devices in PacketFence's terms.

The instructions are based on version 3.1.0 of PacketFence. 

The latest version of this guide is available at http://www.packetfence.org/documentation/ 

Other sources of information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Administration Guide::
  Covers PacketFence installation, configuration and administration. 
Developers Guide::
  Covers captive portal customization, VLAN management customization and 
  instructions for supporting new hardware. 

For the list of noteworthy changes since the last release see the `NEWS` file. 

For a list of compatibility related changes and notes about upgrading see the `UPGRADE` file. 

For more details and developer visible changes see the `ChangeLog` file. 

These files are included in the package and release tarballs.

Note on Inline enforcement support
----------------------------------

There is no need to follow the instructions in this guide if you plan on deploying in inline 
enforcement. In this case all you need to do is to have a flat layer 2 network up to 
PacketFence's inline interface with no other gateway available for devices to reach out to the 
Internet. 

This technique is usually used when your network hardware doesn't support VLAN 
enforcement. 

List of supported Network Devices
----------------------------------

// TODO this list should be autogenerated at some point

PacketFence supports the following devices:

.Supported network devices
[options="header",cols="1,2,2",grid="rows"]
|=======================================================================================
|Vendor           |Model                       |PacketFence Type (used in switches.conf)
|3COM             |E4800G Switch series        |ThreeCom::E4800G 
|                 |E5500G Switch series        |ThreeCom::E5500G 
|                 |NJ220                       |ThreeCom::NJ220 
|                 |SuperStack 3 Switch 4200    |ThreeCom::SS4200 
|                 |SuperStack 3 Switch 4500    |ThreeCom::SS4500 
|                 |Switch 4200G                |ThreeCom::Switch_4200G 
|Aerohive         |All AP models               |AeroHIVE::AP 
|Amer             |L2 Switch SS2R24i           |Amer::SS2R24i
|Aruba            |All Controllers             |Aruba
|Avaya            |Wireless Controllers        |Avaya::WC
|                 |See Nortel Below            |
|Cisco            |Aironet 1130 AG             |Cisco::Aironet_1130
|                 |Aironet 1240 AG             |Cisco::Aironet_1242
|                 |Aironet 1250                |Cisco::Aironet_1250
|                 |2100 Wireless Controller    |Cisco::WLC_2106
|                 |4400 Wireless Controller    |Cisco::WLC_4400
|                 |Catalyst 2900XL Series      |Cisco::Catalyst_2900XL
|                 |Catalyst 2950               |Cisco::Catalyst_2950
|                 |Catalyst 2960               |Cisco::Catalyst_2960
|                 |Catalyst 2970               |Cisco::Catalyst_2970
|                 |Catalyst 3500XL Series      |Cisco::Catalyst_3500XL
|                 |Catalyst 3550               |Cisco::Catalyst_3550
|                 |Catalyst 3560               |Cisco::Catalyst_3560
|                 |Catalyst 3750               |Cisco::Catalyst_3750
|                 |Catalyst 4500               |Cisco::Catalyst_4500
|                 |Catalyst 6500               |Cisco::Catalyst_6500
|                 |Router ISR 1800 Series      |Cisco::ISR_1800
|                 |Wireless Services Module    |Cisco::WiSM
|D-Link           |DES 3526                    |Dlink::DES_3526
|                 |DES 3550                    |Dlink::DES_3550
|                 |DGS 3100                    |Dlink::DGS_3100
|                 |DGS 3200                    |Dlink::DGS_3200
|                 |DWL Access-Points           |Dlink::DWL
|                 |DWS 3026                    |Dlink::DWS_3026
|Dell             |PowerConnect 3424           |Dell::PowerConnect3424
|Edge-corE        |3526XA                      |Accton::ES3536XA
|                 |3528M                       |Accton::ES3528M
|Enterasys        |Matrix N3                   |Enterasys::Matrix_N3
|                 |SecureStack C2              |Enterasys::SecureStack_C2
|                 |SecureStack C3              |Enterasys::SecureStack_C3
|                 |Standalone D2               |Enterasys::D2
|Extreme Networks |Summit Series               |Extreme::Summit
|Extricom         |EXSW Wireless Switches      |Extricom::EXSW
|Foundry          |FastIron 4802               |Foundry::FastIron_4802
|HP               |E4800G Switch series        |HP::E4800G
|                 |E5500G Switch series        |HP::E5500G
|                 |MSM 710 Mobility Controller |HP::Controller_MSM710
|                 |ProCurve 2500 Series        |HP::Procurve_2500
|                 |ProCurve 2600 Series        |HP::Procurve_2600
|                 |ProCurve 3400cl Series      |HP::Procurve_3400cl
|                 |ProCurve 4100 Series        |HP::Procurve_4100
|                 |ProCurve 5400 Series        |HP::Procurve_5400
|Intel            |Express 460                 |Intel::Express_460
|                 |Express 530                 |Intel::Express_530
|Juniper          |EX Series                   |Juniper::EX
|LG-Ericsson      |iPECS Series                |LG::ES4500G
|Linksys          |SRW224G4                    |Linksys::SRW224G4
|Meru             |MC Series                   |Meru::MC
|Motorola         |RF Switches                 |Motorola::RFS
|Netgear          |FSM726v1                    |Netgear::FSM726v1
|Nortel           |BPS2000                     |Nortel::BPS2000
|                 |ERS 2500  Series            |Nortel::ERS2500
|                 |ERS 4000 Series             |Nortel::ERS4000
|                 |ERS 5000 Series             |Nortel::ERS5000
|                 |ERS 5500 with firmware 6    |Nortel::ERS5500_6x
|                 |ES325                       |Nortel::ES325
|                 |Baystack 470                |Nortel::Baystack470
|                 |Baystack 4550               |Nortel::Baystack4550
|                 |Baystack 5500 Series        |Nortel::Baystack5500
|                 |Baystack 5500 w/ 6.x        |Nortel::BayStack5500_6x
|SMC              |TigerStack 6128 L2          |SMC::TS6128L2
|                 |TigerStack 6224M            |SMC::TS6224M
|                 |TigerStack 8824-48M         |SMC::TS8800M
|Trapeze          |Trapeze Controllers         |Trapeze
|Xirrus           |Xirrus WiFi Arrays          |Xirrus
|=======================================================================================

Switch configuration
--------------------

Assumptions
~~~~~~~~~~~

Throughout this configuration example we use the following assumptions for 
our network infrastructure: 

* PacketFence is fully configured with FreeRADIUS running (if you want 802.1X or MAC Auth) 
* PacketFence IP address: 192.168.1.5 
* Normal VLAN: 1 
* Registration VLAN: 2 
* Isolation VLAN: 3 
* MAC Detection VLAN: 4 
* VoIP, Voice VLAN: 100 
* use SNMP v2c 
* SNMP Trap community: public 
* RADIUS Secret: useStrongerSecret 


3COM
~~~~

SuperStack 3 Switch 4200 and 4500
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

PacketFence supports these 3Com switches with no VoIP using one trap type:

* linkUp/linkDown
* Port Security (with static MACs)

Don't forget to update the startup config!

linkUp / linkDown only
++++++++++++++++++++++

Global config settings:

  snmp-agent
  snmp-agent target-host trap address udp-domain 192.168.1.5 params securityname public
  snmp-agent trap enable standard linkup linkdown

On each interface:

  port access vlan 4

In Port Security
++++++++++++++++

Global config settings:

  snmp-agent
  snmp-agent target-host trap address udp-domain 192.168.1.5 params securityname public
  snmp-agent trap enable
  port-security enable
  port-security trap addresslearned
  port-security trap intrusion

On each interface:

  port access vlan 4
  port-security max-mac-count 1
  port-security port-mode secure
  port-security intrusion-mode blockmac
  undo enable snmp trap updown

E4800G
^^^^^^

PacketFence supports these 3Com switches with the following techniques:

* 802.1X with MAC Authentication fallback
* linkUp/linkDown (not recommended)

Voice over IP support was not explicitly tested during implementation however 
it does not mean that it won't work. Don't forget to update the startup config!

linkUp / linkDown only
++++++++++++++++++++++

Global config settings:

  snmp-agent
  snmp-agent target-host trap address udp-domain 192.168.1.5 params securityname public
  snmp-agent trap enable standard linkup linkdown

On each interface:

  port access vlan 4

802.1X with MAC Authentication fallback
+++++++++++++++++++++++++++++++++++++++

Global config settings:

  system-view 
     radius scheme PacketFence 
       primary authentication 192.168.1.5 1812 
       primary accounting 192.168.1.5 1812 
       key authentication useStrongerSecret 
       user-name-format without-domain 
       quit 
     domain packetfence.local 
       authentication default radius-scheme PacketFence 
       authorization default radius-scheme PacketFence 
       quit 
     domain default enable packetfence.local 
     dot1x authentication-method eap 
     port-security enable 
  quit 

If your management authentication on your switch is default, applying the 
configuration above will have your authentication switch to a RADIUS based one
with PacketFence as the authentication server. *It is almost certain that you 
do not want that!*

Below, we will just create a local password for `vty` accesses (telnet) and 
nothing on the console. *In order to avoid locking yourself out, make sure 
to verify your configuration!*

  system-view 
     user-interface aux 0 
       authentication-mode none 
    user-interface vty 0 4 
      user privilege level 3 
      set authentication password simple useStrongerPassword 
    quit 
  quit 

On each interface:

  system-view 
    interface gigabitEthernet 1/0/xx 
      port-security port-mode mac-else-userlogin-secure-ext 
      # userlogin-secure-or-mac-ext could be used below instead 
      # see the Switch_4200G's documentation for a discussion about it 
      undo enable snmp trap updown 
      quit 
  quit 

where `xx` stands for the interface index.

include::additional-info.asciidoc[]

include::commercial-support.asciidoc[]

include::license.asciidoc[]

// vim: set syntax=asciidoc tabstop=2 shiftwidth=2 expandtab:
